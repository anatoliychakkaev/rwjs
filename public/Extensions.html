<!DOCTYPE html>
<html>
  <head>
    <title>RailwayJS</title>

    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css">
    <link href="/javascripts/prettyprint/prettify.css" rel="stylesheet">

    <script type="text/javascript" src="/javascripts/prettyprint/prettify.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://twitter.github.com/bootstrap/1.3.0/bootstrap-scrollspy.js"></script>
    <script>$(function () { prettyPrint() })</script>

    <style>
      section {
        padding-top: 60px;
      }
    </style>

  </head>
  <body style="padding-top: 60px">
    <a href="http://github.com/1602/express-on-railway"><img style="position: fixed; top: 0; right: 0; border: 0;z-index: 10001;" src="https://d3nwyuy0nl342s.cloudfront.net/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a>
    <div class="topbar-wrapper" style="z-index: 5;">
      <div class="topbar" data-scrollspy="scrollspy">
        <div class="topbar-inner">
          <div class="container">
            <h3><a href="#">RailwayJS</a></h3>
            <ul class="nav">
              <li><a href="/about.html">About</a></li><li><a href="/routing.html">Routing</a></li><li><a href="/controller.html">Controller</a></li><li><a href="/views.html">Views</a></li><li><a href="/generators.html">Generators</a></li><li><a href="/console.html">Console</a></li><li><a href="/coffee.html">Coffee</a></li><li><a href="/localization.html">Localization</a></li><li class="active"><a href="/extensions.html">Extensions</a></li><li><a href="/heroku.html">Heroku</a></li>
              <!--li class="dropdown">
                <a href="#" class="dropdown-toggle">Features</a>
                <ul class="dropdown-menu">
                  <li><a href="#">Extensions</a></li>
                  <li><a href="#">Coffee</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Contributing</a></li>
                </ul>
              </li-->
            </ul>
          </div>
        </div><!-- /topbar-inner -->
      </div><!-- /topbar -->
    </div><!-- /topbar-wrapper -->

<div class="container">
  <h1 style="text-align: center; font-size: 250%; position: relative; top: 30px;"><span style="color: #a24;">RightwayJS - MVC framework</span><br/><small>Create NodeJS web apps faster with more energy, using RailwayJS</small></h1>

  <section><div class="page-header">

<h1>Extensions API <small>Simple way to add missing functionality to the framework</small></h1>

</div>

<div class="row">

<div class="span4">

<p>Any npm package is already extension for railway. Just put line to <code>npmfile.js</code>, for example:</p>

<pre class="prettyprint">require('railway-twitter');
</pre>

<p>Just one note: if package have <code>init</code> method, it will be invoked after application initialization.</p>

<p>For example you can check out <a href="https://github.com/1602/railway-twitter">twitter-auth extension</a> for railway.</p>

</div>

<div class="span8">

<h2>Installation script</h2>

<p>If your extension have <code>install.js</code> script in the root, it will be invoked after installation with <code>railway install</code> command.</p>

<p>This script will be executed in application context, i.e. you can access global variables <code>app</code> and <code>railway</code>. You <strong>must</strong> call <code>process.exit()</code> when installation process has been completed.</p>

<h2>Railway extension API</h2>

<p>All railway modules published as global singleton <code>railway</code>. Any module can be extended or monkey-patched. Let's take a look to most common use-cases.</p>

<h2>Tools</h2>

<p>Hash <code>railway.tools</code> contains commands that can be invoked using command line, for example <code>railway routes</code> command will call <code>railway.tools.routes()</code> method.</p>

<p>To write tool, just add method to <code>railway.tools</code> object, name of this method will become the command:</p>

<pre class="prettyprint">railway.tools.database = function () {
    switch (railway.args.shift()) {
    case 'clean':
        // clean db
        break;
    case 'backup':
        // backup db
        break;
    case 'restore':
        // restore db
        break;
    default:
        console.log('Usage: railway database [clean|backup|restore]');
    }
};
</pre>

<p>then the following commands will be available for call:</p>

<pre class="prettyprint">railway database
railway database backup
railway database clean
railway database restore
</pre>

<p>If you want to see this command in help message <code>railway help</code> you can provide some information about tool using <code>help</code> hash:</p>

<pre class="prettyprint">railway.tools.db.help = {
    shortcut: 'db',
    usage: 'database [backup|restore|clean]',
    description: 'Some database features'
};
</pre>

<p>Next time you will call railway help you'll see:</p>

<pre class="prettyprint">Commands:
   ...
   db, database [backup|restore|clean]  Some database features
</pre>

<p>If you have defined shortcut, it can be used instead of full command name:</p>

<pre class="prettyprint"> railway db clean
</pre>

<p>To learn more, please check out <a href="https://github.com/1602/express-on-railway/blob/master/lib/tools.js">the sources: <code>lib/tools.js</code></a></p>

<h2>Generators</h2>

<p>Coming soon. It's about <code>railway.generators</code> module and <code>railway generate smth</code> family of commands.</p>

<h2>Discussion in google groups</h2>

<p>API is still in develop now, feel free to leave comments about it in the related google groups <a href="http://groups.google.com/group/railwayjs/browse_thread/thread/1cfa3e1e348fc62c">thread</a>.</p></section><div id="disqus_thread"></div><script>$(function () {var disqus_shortname = 'railwayjs', disqus_identifier = "<%= page.path %>"; $.getScript("http://railwayjs.disqus.com/embed.js");})</script>
</div>

</html>
